name: Termux Complete Setup
id: termux_setup
version: 1.0.0
description: Complete development environment setup for Termux including Zsh, Vim, Git, LLM, and dev languages
tags:
  - termux
  - setup
  - configuration
  - development
  - first-run

requires_termux: true
estimated_time: "10-20 minutes"

flows:
  - name: setup
    description: Interactive setup wizard for first-time Termux users
    steps:
      - type: message
        content: |
          â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
          â•‘       ğŸš€ Termux Complete Setup Wizard                   â•‘
          â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          
          This will configure your Termux environment with:
            â€¢ System updates & mirrors
            â€¢ Android storage access
            â€¢ Zsh shell with themes
            â€¢ Essential dev tools (git, gh, vim, llm)
            â€¢ Optional: PHP, Node.js, Golang, Python
          
          This process may take 10-20 minutes.

      - type: confirm
        prompt: "Continue with setup?"
        default: yes
        on_no: abort

      - type: section
        title: "Update & Upgrade"
        steps:
          - type: command
            command: pkg update -y
            description: Updating package lists
            show_output: true
          
          - type: command
            command: pkg upgrade -y
            description: Upgrading packages
            show_output: true

      - type: section
        title: "Configure Mirrors"
        steps:
          - type: check_command
            command: termux-change-repo
            on_missing: skip
          
          - type: message
            content: "Running termux-change-repo (select mirrors from the menu)"
          
          - type: command
            command: termux-change-repo
            interactive: true
            continue_on_error: true

      - type: section
        title: "Setup Android Storage"
        steps:
          - type: message
            content: "Setting up access to Android storage. You will be prompted to grant permissions."
          
          - type: command
            command: termux-setup-storage
            interactive: true
            continue_on_error: true
          
          - type: message
            content: "Storage will be accessible at ~/storage/"

      - type: section
        title: "Install Essential Tools"
        steps:
          - type: message
            content: "Installing essential tools: git, gh, curl, wget, man, openssh, zip, unzip"
          
          - type: command
            command: pkg install -y git gh curl wget man openssh zip unzip
            show_output: true

      - type: section
        title: "Install Zsh & Themes"
        steps:
          - type: command
            command: pkg install -y zsh
            description: Installing Zsh shell
            show_output: true
          
          - type: check_path
            path: ~/.oh-my-zsh
            on_exists: skip_to_p10k
          
          - type: message
            content: "Installing Oh My Zsh..."
          
          - type: command
            command: sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --unattended
            continue_on_error: true
          
          - type: label
            name: skip_to_p10k
          
          - type: check_path
            path: ~/.oh-my-zsh/custom/themes/powerlevel10k
            on_exists: skip_to_zshrc
          
          - type: message
            content: "Installing Powerlevel10k theme..."
          
          - type: command
            command: git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ~/.oh-my-zsh/custom/themes/powerlevel10k
            continue_on_error: true
          
          - type: label
            name: skip_to_zshrc
          
          - type: file_operation
            operation: configure_zshrc
            description: Configuring .zshrc with theme and aliases
          
          - type: command
            command: chsh -s zsh
            description: Setting Zsh as default shell
            continue_on_error: true

      - type: section
        title: "Configure Vim"
        steps:
          - type: command
            command: pkg install -y vim
            description: Installing Vim
            show_output: true
          
          - type: file_operation
            operation: create_vimrc
            description: Creating Vim configuration

      - type: section
        title: "Install LLM Tool"
        steps:
          - type: check_command
            command: python
            on_missing: install_python
          
          - type: goto
            label: install_llm
          
          - type: label
            name: install_python
          
          - type: message
            content: "Installing Python..."
          
          - type: command
            command: pkg install -y python
            show_output: true
          
          - type: label
            name: install_llm
          
          - type: message
            content: "Installing llm via pip..."
          
          - type: command
            command: pip install -U llm
            show_output: true
          
          - type: message
            content: |
              
              â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
              â•‘  DeepSeek LLM Integration                                â•‘
              â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
              
              DeepSeek offers powerful AI with affordable API rates.
              Get your API key at: https://platform.deepseek.com/api_keys
          
          - type: confirm
            prompt: "Do you have a DeepSeek API key?"
            default: no
            on_no: skip_deepseek
          
          - type: input
            prompt: "Enter your DeepSeek API key"
            variable: DEEPSEEK_API_KEY
            required: false
          
          - type: command
            command: "echo '{{ .DEEPSEEK_API_KEY }}' | llm keys set deepseek"
            condition: "{{ .DEEPSEEK_API_KEY }}"
            continue_on_error: true
          
          - type: command
            command: llm install llm-deepseek
            description: Installing DeepSeek plugin
            continue_on_error: true
          
          - type: message
            content: |
              
              âœ… LLM configured with DeepSeek!
              Usage: llm -m deepseek/deepseek-chat 'your question'
          
          - type: goto
            label: after_deepseek
          
          - type: label
            name: skip_deepseek
          
          - type: message
            content: |
              
              You can configure DeepSeek later by running:
                llm keys set deepseek
          
          - type: label
            name: after_deepseek

      - type: section
        title: "Optional Dev Languages"
        steps:
          - type: message
            content: |
              
              Optional Development Languages
              Choose languages to install (you can install more later with pkg install)
          
          - type: check_command
            command: php
            on_exists: skip_php
          
          - type: confirm
            prompt: "Install PHP?"
            default: no
            on_no: skip_php
          
          - type: command
            command: pkg install -y php
            description: Installing PHP
            show_output: true
          
          - type: label
            name: skip_php
          
          - type: check_command
            command: node
            on_exists: skip_node
          
          - type: confirm
            prompt: "Install Node.js?"
            default: no
            on_no: skip_node
          
          - type: command
            command: pkg install -y nodejs
            description: Installing Node.js
            show_output: true
          
          - type: label
            name: skip_node
          
          - type: check_command
            command: go
            on_exists: skip_go
          
          - type: confirm
            prompt: "Install Golang?"
            default: no
            on_no: skip_go
          
          - type: command
            command: pkg install -y golang
            description: Installing Golang
            show_output: true
          
          - type: label
            name: skip_go
          
          - type: check_command
            command: python
            on_exists: skip_python
          
          - type: confirm
            prompt: "Install Python?"
            default: no
            on_no: skip_python
          
          - type: command
            command: pkg install -y python
            description: Installing Python
            show_output: true
          
          - type: label
            name: skip_python

      - type: message
        content: |
          
          â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
          â•‘  âœ… Termux setup complete!                               â•‘
          â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          
          Restart Termux to apply all changes (especially Zsh).
          Run 'clio' again to start using your assistant.
      
      - type: file_operation
        operation: mark_complete
        description: Marking setup as complete
